# Mottu Storage IoT - Sistema de Gerenciamento de P√°tio

![Python](https://img.shields.io/badge/Python-3.9%2B-blue.svg)
![Framework](https://img.shields.io/badge/Framework-Flask-green.svg)
![Protocol](https://img.shields.io/badge/Protocol-MQTT-red.svg)
![Database](https://img.shields.io/badge/Database-SQLite-blue.svg)

Este projeto √© um prot√≥tipo funcional de um sistema de gerenciamento de p√°tio para a **Mottu**, utilizando uma arquitetura baseada em **Internet das Coisas (IoT)**. A solu√ß√£o simula o monitoramento em tempo real de vagas de estacionamento atrav√©s de dispositivos IoT, oferecendo uma vis√£o centralizada e controle para os gestores do armaz√©m.

---

## üéØ Problema de Neg√≥cio

A gest√£o de grandes p√°tios de motocicletas √© um desafio log√≠stico. O controle manual sobre a ocupa√ß√£o das vagas √© lento, suscet√≠vel a erros humanos e n√£o fornece uma vis√£o instant√¢nea do status do p√°tio. Isso dificulta a localiza√ß√£o de ve√≠culos, otimiza√ß√£o do espa√ßo e a opera√ß√£o di√°ria.

## üí° Solu√ß√£o Proposta

Implementamos uma solu√ß√£o de IoT onde cada vaga de estacionamento √© equipada com um dispositivo "inteligente" (simulado). Este dispositivo monitora o status da vaga (Vazia, Ocupada, Manuten√ß√£o) e identifica a moto estacionada.

Os dados s√£o transmitidos em tempo real via protocolo **MQTT** para um sistema central que os persiste em um banco de dados e os exibe em duas interfaces web distintas:
1.  **Dashboard de Visualiza√ß√£o:** Um painel "read-only" para monitoramento geral, ideal para ser exibido em telas no p√°tio.
2.  **Painel de Gest√£o:** Uma interface de controle completa para os gestores do armaz√©m, permitindo iniciar/parar a simula√ß√£o de vagas e registrar a entrada e sa√≠da de ve√≠culos.

---

## üèõÔ∏è Arquitetura do Sistema

O projeto √© desacoplado e modular, composto pelos seguintes servi√ßos independentes:

1.  **`vaga_iot_simulator.py` (Dispositivo IoT Simulado):**
    * Um script Python que representa o hardware de uma vaga.
    * Cada inst√¢ncia √© um processo independente que se conecta ao Broker MQTT.
    * √â iniciado e parado remotamente pelo Painel de Gest√£o.
    * Sua principal fun√ß√£o √© estar "online" para que o sistema saiba que a vaga est√° ativa.

2.  **Broker MQTT (Nuvem):**
    * Utilizamos um broker p√∫blico (`broker.hivemq.com`) como o sistema central de mensagens, respons√°vel pela comunica√ß√£o em tempo real entre todos os componentes.

3.  **`mqtt_listener.py` (Servi√ßo Coletor):**
    * Um servi√ßo de backend que fica rodando continuamente.
    * Ele se inscreve no t√≥pico MQTT geral e "ouve" todas as mensagens de telemetria enviadas pelas vagas.
    * √â o √∫nico servi√ßo respons√°vel por processar os dados e escrev√™-los no banco de dados SQLite.

4.  **`dashboard_app.py` (Aplica√ß√£o do Dashboard Visual):**
    * Um servidor web Flask (rodando na porta `5001`) que serve uma p√°gina de visualiza√ß√£o.
    * A p√°gina busca os dados mais recentes do banco de dados via uma API interna e exibe o status de cada vaga, atualizando-se periodicamente. N√£o possui controles.

5.  **`manager_app.py` (Aplica√ß√£o do Painel de Gest√£o):**
    * Um segundo servidor web Flask (rodando na porta `5002`) que serve a interface de controle.
    * Permite ao gestor:
        * Iniciar e parar os processos dos simuladores de vagas.
        * Simular o estacionamento de uma moto (enviando um comando MQTT).
        * Simular a sa√≠da de uma moto (enviando outro comando MQTT).

---

## üõ†Ô∏è Tecnologias Utilizadas

* **Linguagem:** Python 3
* **Backend:** Flask
* **Comunica√ß√£o IoT:** Paho MQTT
* **Banco de Dados:** SQLite 3
* **Interface:** HTML, CSS, JavaScript (com Fetch API)

---

## üìÇ Estrutura de Arquivos

```
.
‚îú‚îÄ‚îÄ dashboard_app.py      # Servidor Flask para o painel visual
‚îú‚îÄ‚îÄ manager_app.py        # Servidor Flask para o painel do gestor
‚îú‚îÄ‚îÄ mqtt_listener.py      # Servi√ßo que ouve o MQTT e salva no DB
‚îú‚îÄ‚îÄ database.py           # Script para criar/resetar o banco de dados
‚îú‚îÄ‚îÄ vaga_iot_simulator.py # Script que simula o dispositivo IoT da vaga
‚îú‚îÄ‚îÄ requirements.txt      # Depend√™ncias do projeto
‚îî‚îÄ‚îÄ templates/
    ‚îú‚îÄ‚îÄ dashboard.html    # HTML do painel visual
    ‚îî‚îÄ‚îÄ manager.html      # HTML do painel do gestor
```

---

## ‚ñ∂Ô∏è Como Executar o Sistema

Para rodar o projeto, voc√™ precisar√° de **3 terminais**.

### 1. Pr√©-requisitos
* Python 3.8+
* `pip` (gerenciador de pacotes)

### 2. Instala√ß√£o
```bash
# Clone o reposit√≥rio
git clone https://github.com/ViniciusLeopoldino/IOT_SPRINT3.git
cd IOT_SPRINT3

# Crie e ative um ambiente virtual (recomendado)
python -m venv venv
# Windows: venv\Scripts\activate | macOS/Linux: source venv/bin/activate

# Instale as depend√™ncias
pip install -r requirements.txt
```

### 3. Inicializa√ß√£o do Banco de Dados
Este passo s√≥ precisa ser executado uma vez (ou sempre que quiser resetar o p√°tio).

```bash
python database.py
```

### 4. Execu√ß√£o dos Servi√ßos
Inicie cada servi√ßo em seu pr√≥prio terminal, na ordem abaixo:

* **Terminal 1 - Listener MQTT:**
    ```bash
    python mqtt_listener.py
    ```

* **Terminal 2 - Dashboard Visual:**
    ```bash
    python dashboard_app.py
    ```

* **Terminal 3 - Painel do Gestor:**
    ```bash
    python manager_app.py
    ```

### 5. Utiliza√ß√£o
1.  **Abra o Dashboard Visual** no navegador: `http://127.0.0.1:5001`
2.  **Abra o Painel do Gestor** em outra aba: `http://127.0.0.1:5002`
3.  Use o **Painel do Gestor** para controlar toda a simula√ß√£o:
    * Clique em "Iniciar" para "ligar" os sensores das vagas.
    * Preencha uma placa e clique em "Estacionar" para simular a chegada de uma moto.
    * Observe que o status muda tanto no painel do gestor quanto no dashboard visual.

---

## üë®‚Äçüíª Integrantes

* **RM:** 557047 **Nome:** Vinicius Leopoldino de Oliveira
* **RM:** 556834 **Nome:** Pablo Lopes Doria de Andrade
* **Curso:** An√°lise e Desenvolvimento de Sistemas - FIAP
* **Mat√©ria:** Disruptive Architectures: IoT, IOB & Generative IA
